<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xml:lang="en" lang="en"
	xmlns:p="http://primefaces.org/ui">

<h:head></h:head>

<h:body>
<f:view locale="fa">
<h:form id="table_form">
<p:dataTable id="person_table" cellspacing="0" tableStyleClass="table"
	tableStyle="direction:rtl;width:100%;cellspacing:0" var="person"
	value="#{personMB.personList}" rowKey="#{person.id}"
	rowIndexVar="rowIndex" selectionMode="single"
	selection="#{personMB.selectedPerson}"
	emptyMessage="#{msgs.noRecordFound}"
	filteredValue="#{personMB.filteredPersonList}">

	<p:ajax event="rowSelect" update=":table_form:display" oncomplete="personDialog.show()" />

	<p:column styleClass="tableRowIndex" headerText="#">
		<div align="center">
			<h:outputText value="#{rowIndex+1}" />
		</div>
	</p:column>

	<p:column headerText="#{msgs.firstName}"
		filterBy="#{person.firstName}"
		filterMatchMode="contains">
		#{person.firstName}
	</p:column>

	<p:column headerText="#{msgs.lastName}"
		filterBy="#{person.lastName}"
		filterMatchMode="contains">
		#{person.lastName}
	</p:column>

	<p:column>
		<p:commandLink title="#{msgs.remove}" event="click"
			oncomplete="confirmation.show()" global="false">
			<f:setPropertyActionListener
				target="#{personMB.selectedPerson}" value="#{person}" />
			<h:graphicImage name="remove.png" library="images" width="32" height="32" />
		</p:commandLink>
	</p:column>
</p:dataTable>

<p:dialog id="dialog" header="#{msgs.person_details}" widgetVar="personDialog" resizable="false"
	showEffect="explode" hideEffect="explode" width="750">
	<p:accordionPanel multiple="true" id="display">
	<p:tab title="#{msgs.person_details}">
		<p:panelGrid style="direction: rtl;width: 100%">
			<p:row>
				<p:column>
		            <h:outputText value="#{msgs.firstName}: " />
	            </p:column>
	            <p:column styleClass="input-bg-page">
		            <h:outputText value="#{personMB.selectedPerson.firstName}" />
	            </p:column>
	            
				<p:column>
		            <h:outputText value="#{msgs.lastName}: " />
	            </p:column>
	            <p:column styleClass="input-bg-page">
		            <h:outputText value="#{personMB.selectedPerson.lastName}" />
	            </p:column>
			</p:row>
		</p:panelGrid>
	</p:tab>
	</p:accordionPanel>
</p:dialog>
</h:form>

<h:form id="frm1">
	<p:confirmDialog id="confirmDialog" message="#{msgs.areYouSure}"
		header="#{msgs.areYouSure}" severity="alert" widgetVar="confirmation">
		<p:commandButton id="confirm" value="#{msgs.yes}"
			update=":table_form:person_table" oncomplete="confirmation.hide()"
			actionListener="#{personMB.personDelete}" />
		<p:commandButton id="decline" value="#{msgs.no}" onclick="confirmation.hide()"
			type="button" />
	</p:confirmDialog>
</h:form>
</f:view>
</h:body>
</html>